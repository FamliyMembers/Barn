<ion-view style="background:white" cache-view="false">
  <ion-nav-title>{{title}}</ion-nav-title>
  <ion-content ng-controller="getEchartsData" overflow-scroll="true">
    <ion-refresher pulling-text="下拉刷新" spinner="bubbles" on-refresh="doRefresh()"></ion-refresher>

    <ion-slide-box active-slide="myActiveSlide" on-slide-changed="slideHasChanged(index)" does-continue="true" auto-play="true"
      show-pager="true" style="height:10%;border-right:1px solid #D6D7D8;">
      <ion-slide>
        <div style="background:white;width:100%;height:100%;border-bottom:1px solid #D6D7D8;">
          <div style="position:relative;width:50%;height:100%;float:left;border-right:1px solid #D6D7D8;">
            <div style="position:relative;
                      width:30%;
                      height:50%;
                      left:20%;
                      top:20%;
                      border-radius:5px;
                      background:#25554E">
              <p style="color:white ;
                      position:relative;
                      width:100%;
                      height:100%;
                      left:20;">
                <img src="./img/temperatureIcon.png" width="15">气温</p>
            </div>
            <p style="position:absolute;
                    top:25%;
                    right:16%;
                    font-size:18px;
                    color:#25554E;">{{ airTemperature }}℃</p>
          </div>
          <div style="position:relative;width:50%;height:100%;float:left;border-right:1px solid #D6D7D8;">
            <div style="position:relative;
                      width:30%;
                      height:50%;
                      left:20%;
                      top:20%;
                      border-radius:5px;
                      background:#25554E;
                      ">
              <p style="color:white ;position:relative;
                      width:100%;
                      height:100%;
                      left:20;">
                <img src="./img/temperatureIcon.png" width="15">气湿</p>
            </div>
            <p style="position:absolute;
                    top:25%;
                    right:16%;
                    font-size:18px;
                    color:#25554E;">{{ airHumidity }}%</p>
          </div>
        </div>
      </ion-slide>
      <ion-slide>
        <div style="background:white;width:100%;height:100%;border-bottom:1px solid #D6D7D8;">
          <div style="position:relative;width:50%;height:100%;float:left;border-right:1px solid #D6D7D8;">
            <div style="position:relative;
                      width:30%;
                      height:50%;
                      left:20%;
                      top:20%;
                      border-radius:5px;
                      background:#25554E;
                      ">
              <p style="color:white ;position:relative;
                      width:100%;
                      height:100%;
                      left:20;"> <img src="./img/temperatureIcon.png" width="15">仓温</p>
            </div>
            <p style="position:absolute;
                      top:25%;
                      right:16%;
                      font-size:18px;
                      color:#25554E;">{{ barnTemperature }}℃</p>
          </div>
          <div style="position:relative;width:50%;height:100%;float:left">
            <div style="position:relative;
                        width:30%;
                        height:50%;
                        left:20%;
                        top:20%;
                        border-radius:5px;
                        background:#25554E;
                        ">
              <p style="color:white ;position:relative;
                        width:100%;
                        height:100%;
                        left:20;"> <img src="./img/temperatureIcon.png" width="15">仓湿</p>
            </div>
            <p style="position:absolute;
                        top:25%;
                        right:16%;
                        font-size:18px;
                        color:#25554E;">{{ barnHumidity }}%</p>
          </div>
        </div>
      </ion-slide>
      <ion-slide>
        <div style="background:white;width:100%;height:100%;border-bottom:1px solid #D6D7D8;">
          <div style="position:relative;width:50%;height:100%;float:left;border-right:1px solid #D6D7D8;">
            <div style="position:relative;
                      width:30%;
                      height:50%;
                      left:20%;
                      top:20%;
                      border-radius:5px;
                      background:#25554E">
              <p style="color:white ;
                      position:relative;
                      width:100%;
                      height:100%;
                      left:20;">
                <img src="./img/temperatureIcon.png" width="15">气温</p>
            </div>
            <p style="position:absolute;
                    top:25%;
                    right:16%;
                    font-size:18px;
                    color:#25554E;">{{ airTemperature }}℃</p>
          </div>
          <div style="position:relative;width:50%;height:100%;float:left;border-right:1px solid #D6D7D8;">
            <div style="position:relative;
                      width:30%;
                      height:50%;
                      left:20%;
                      top:20%;
                      border-radius:5px;
                      background:#25554E;
                      ">
              <p style="color:white ;position:relative;
                      width:100%;
                      height:100%;
                      left:20;">
                <img src="./img/temperatureIcon.png" width="15">气湿</p>
            </div>
            <p style="position:absolute;
                    top:25%;
                    right:16%;
                    font-size:18px;
                    color:#25554E;">{{ airHumidity }}%</p>
          </div>
        </div>
      </ion-slide>
      <ion-slide>
        <div style="background:white;width:100%;height:100%;border-bottom:1px solid #D6D7D8;">
          <div style="position:relative;width:50%;height:100%;float:left;border-right:1px solid #D6D7D8;">
            <div style="position:relative;
                      width:30%;
                      height:50%;
                      left:20%;
                      top:20%;
                      border-radius:5px;
                      background:#25554E;
                      ">
              <p style="color:white ;position:relative;
                      width:100%;
                      height:100%;
                      left:20;"> <img src="./img/temperatureIcon.png" width="15">仓温</p>
            </div>
            <p style="position:absolute;
                      top:25%;
                      right:16%;
                      font-size:18px;
                      color:#25554E;">{{ barnTemperature }}℃</p>
          </div>
          <div style="position:relative;width:50%;height:100%;float:left">
            <div style="position:relative;
                        width:30%;
                        height:50%;
                        left:20%;
                        top:20%;
                        border-radius:5px;
                        background:#25554E;
                        ">
              <p style="color:white ;position:relative;
                        width:100%;
                        height:100%;
                        left:20;"> <img src="./img/temperatureIcon.png" width="15">仓湿</p>
            </div>
            <p style="position:absolute;
                        top:25%;
                        right:16%;
                        font-size:18px;
                        color:#25554E;">{{ barnHumidity }}%</p>
          </div>
        </div>
      </ion-slide>
    </ion-slide-box>

    <div style="position:absolute;
                    width:100%;
                    height:110%;
                    top:10%;
                    background:#F3F3F3;">
      <img src='./img/arrowleft.png' width="20" height="25" ng-click='doChangeEcharts()' style="border-style:none; position:absolute;left:25%;top:10px;">
      </img>
      <p style=" font-size:18px;color:#25554E;position:absolute;top:12px; left:30%;right:30%; text-align:center;letter-spacing:0px;"
        ng-model="label"><b>{{label}}</b></p>
      <img src='./img/arrowright.png' width="20" height="25" ng-click='doChangeEcharts()' style="border-style:none; position:absolute;right:25%;top:10px;">
      </input>
      <!--学弟echarts代码部分-->
      <!--异常数据echarts开始-->
      <div id="second" style="position:absolute;
                               width: 100%;
                               height:40%;
                               top:50px;">
      </div>
      <div id="second-alarm" style="position:absolute;
                               width: 100%;
                               height:40%;
                               top:50%;">
        <!--告警点合计部分-->
        <div style="position:relative;width:90%;height:60%;left:5%;right:5%">
          <img src='./img/strangeDataCollect.png' width="20" height="25" style="border-style:none; position:absolute;left:0px;top:0px;"></img>
          <h4 style="color:gray;position:absolute;left:25px;margin:0px;top:3px;">告警点合计</h4>
          <table style="color:gray;border-top:1px solid #E8DCDB;
                        border-bottom:1px solid #E8DCDB;text-align:center;
                        position:absolute;width:90%;height:80%;left:5%;right:5%;top:25px;">
            <div style="border-left:1px solid #E8DCDB;width:1px;height:50%;position:absolute;left:50%;top:30%"> </div>
            <tr style="border-bottom:1px solid #E8DCDB;">
              <td style="width:50%;">高温<br>
                <p class="table-warn-p">{{ highTemp }}</p>
              </td>
              <td style="width:50%">发热<br>
                <p class="table-warn-p">{{ hotTemp }}</p>
              </td>
            </tr>
            <tr>
              <td style="width:50%;">电缆未埋入粮堆<br>
                <p class="table-warn-p">{{ dontIn }}</p>
              </td>
              <td style="width:50%">温升过快<br>
                <p class="table-warn-p">{{ tooQuick }}</p>
              </td>
            </tr>
          </table>
        </div>
        <!--绿灰相间表格部分-->
        <div style="position:relative;width:100%;background:#F3F3F3">
          <table class="table-barn-border" style="position:relative;width:90%;left:5%;right:5%">

            <tr class="table-barn-detail ">
              <th class="table-barn-detail ">排号</th>
              <th class="table-barn-detail ">杆号</th>
              <th class="table-barn-detail ">层数</th>
              <th class="table-barn-detail ">温度值</th>
              <th class="table-barn-detail ">告警类型</th>
            </tr>
            <tr class="table-barn-border" ng-repeat="x in record">
              <td>{{ x[0] }}</td>
              <td>{{ x[1]}}</td>
              <td>{{ x[2] }}</td>
              <td>{{ x[3]}}</td>
              <td>{{ x[4] }}</td>
            </tr>
          </table>
          <div style="position:absolute;width:100%;height:20px;background:#F3F3F3">
          </div>
        </div>
      </div>
      <!--异常echarts结束-->

      <!--粮温echarts开始-->
      <div id="first" style="position:absolute;
                               width: 100%;
                               height:60%;
                               top:50px;
                               ">
      </div>
      <div id="first-BarnInfo" style="position:absolute;
                               width: 100%;
                               height:30%;
                               top:70%;">
        <table class="table-barn-border" ng-controller="listFunc" style="position:relative;width:80%;height:80%;left:10%;right:10%">
          <!--<caption style="font-size:14px;color:gray">统计信息</caption>-->
          <tr class="table-barn-detail ">
            <th class="table-barn-detail ">仓号</th>
            <th class="table-barn-detail ">仓平均温</th>
            <th class="table-barn-detail ">仓最高温</th>
            <th class="table-barn-detail ">仓最低温</th>
          </tr>
          <tr class="table-barn-border">
            <td>{{ deviceId }}</td>
            <td>{{ barnAverage.toFixed(2) }}</td>
            <td>{{ maxBarnValue }}</td>
            <td>{{ minBarnValue }}</td>
          </tr>
          <tr class="table-barn-detail ">
            <th class="table-barn-detail ">层数</th>
            <th class="table-barn-detail ">层平均温</th>
            <th class="table-barn-detail ">层最高温</th>
            <th class="table-barn-detail ">层最低温</th>
          </tr>
          <tr class="table-barn-border" ng-repeat="x in records">
            <td>{{ x[0] }}</td>
            <td>{{ x[1].toFixed(2) }}</td>
            <td>{{ x[2] }}</td>
            <td>{{ x[3] }}</td>
          </tr>



        </table>
        <div style="position:absolute;width:100%;height:20px;background:#F3F3F3">
        </div>
      </div>
      <!--粮温echarts结束-->
      <p style=" font-size:10px;color:gray; position:absolute;top:35px;text-align:center;left:30%;letter-spacing:0px;">更新于{{dateNow}}</p>
    </div>
  </ion-content>
</ion-view>